/*! Copyright 2026 Adobe
All Rights Reserved. */
import{Initializer as v}from"@dropins/tools/lib.js";import{events as S}from"@dropins/tools/event-bus.js";import{signal as D}from"@dropins/tools/signals.js";function w(e,i,t,n){function o(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function _(r){try{l(n.next(r))}catch(u){s(u)}}function f(r){try{l(n.throw(r))}catch(u){s(u)}}function l(r){r.done?a(r.value):o(r.value).then(_,f)}l((n=n.apply(e,i||[])).next())})}function P(){return w(this,arguments,void 0,function*(e={}){if("PaymentServicesSDK"in window)return window.PaymentServicesSDK;if(yield A(e.customUrl||"https://localhost:3005/PaymentSDK.js",e.scriptAttributes||{}),!("PaymentServicesSDK"in window))throw new Error("Script loaded, but Payment Services SDK not found.");return window.PaymentServicesSDK})}function A(e,{crossOrigin:i,integrity:t}){const n=document.createElement("script");return i!=null&&(n.crossOrigin=i),t!=null&&(n.integrity=t),new Promise((o,a)=>{n.src=e,n.async=!0,n.onload=()=>o(),n.onerror=s=>a(s),document.head.appendChild(n)})}var C=P;const y=D({status:"initializing",paymentsSDK:null});function E(e){y.value={paymentsSDK:e,status:"ready"}}function T(){y.value={paymentsSDK:null,status:"error"}}function h(e){return e.toLowerCase().replace("_","-")}const d=new v({init:async e=>{const i={};d.config.setConfig({...i,...e}),C({customUrl:e==null?void 0:e.customUrl}).then(async t=>{const[n,o]=await Promise.all([m(t,p.CHECKOUT),m(t,p.PRODUCT_DETAIL)]);E({checkout:n,productDetail:o})}).catch(t=>{console.error("Error occurred during payment services drop-in initialization.",t),T()})},listeners:()=>[]});async function m(e,i){const t=d.config.getConfig(),n=new e({gqlApiUrl:t==null?void 0:t.gqlApiUrl,getCustomerToken:t==null?void 0:t.getCustomerToken,storeViewCode:t==null?void 0:t.storeViewCode});return await n.Payment.init({location:i}),K(n,i),n}function K(e,i){const t=`payment-services/initialized/${h(i)}`,n={availablePaymentMethods:[]};e.Payment.ApplePay.isAvailable()&&n.availablePaymentMethods.push(c.APPLE_PAY),e.Payment.GooglePay.isAvailable()&&n.availablePaymentMethods.push(c.GOOGLE_PAY),e.Payment.CreditCard.isAvailable()&&n.availablePaymentMethods.push(c.CREDIT_CARD),S.emit(t,n)}const O=d.config;var c=(e=>(e.APPLE_PAY="payment_services_paypal_apple_pay",e.CREDIT_CARD="payment_services_paypal_hosted_fields",e.FASTLANE="payment_services_paypal_fastlane",e.GOOGLE_PAY="payment_services_paypal_google_pay",e.SMART_BUTTONS="payment_services_paypal_smart_buttons",e.VAULT="payment_services_paypal_vault",e))(c||{}),p=(e=>(e.CHECKOUT="CHECKOUT",e.PRODUCT_DETAIL="PRODUCT_DETAIL",e))(p||{});export{c as P,p as a,O as c,d as i,y as s};
//# sourceMappingURL=location.js.map
